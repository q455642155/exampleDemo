<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>js运动函数</title>
    <style type="text/css">
    *{padding:0;margin:0;}
    div{width:100px;height:50px;position:absolute;background:green;margin-top:20px;left:0;}
    </style>
</head>

<body>
    <input type="button" value="移动到400px" id="btn1"><input type="button" value="移动到800px" id="btn2">
    <div id="dv"></div>
    <script type="text/javascript">
        function getId(id){
            return document.getElementById(id)
        }
        getId("btn1").onclick=function(){
            animate(getId("dv"),400)
        }
        getId("btn2").onclick=function(){
            animate(getId("dv"),800)
        }
        // 封装动画函数

        // 匀速运动
        // function animate(ele,target){
        //     clearInterval(ele.timeId)
        //     ele.timeId=setInterval(function(){
        //         var current=ele.offsetLeft;
        //         var step=10;
        //         step=target>current?step:-step;
        //         current+=step;
        //         if(Math.abs(target-current)>Math.abs(step)){
        //             ele.style.left=current+'px'
        //         }else{
        //             clearInterval(ele.timeId)
        //             ele.style.left=target+'px'
        //         }
        //     },30)
        // }
        // 变速运动
        function animate(ele,target){
            clearInterval(ele.timeId);
            ele.timeId=setInterval(function(){
                var current=ele.offsetLeft;
                var step=(target-current)/10;
                step=step>0?Math.ceil(step):Math.floor(step);
                current+=step;
                ele.style.left=current+'px'
                if(target==current){
                    clearInterval(ele.timeId)
                }
            },30)
        }
    </script>
</body>

</html>